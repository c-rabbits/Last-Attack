# Last-Attack

크라켄 보스를 두고 **강타 + 막타 경쟁**을 하는 가로형 슈팅 미니게임 프로토타입입니다.

## 실행 방법

정적 파일 기반이므로 아무 HTTP 서버로 실행할 수 있습니다.

```bash
cd /workspace
python3 -m http.server 4173
```

브라우저에서 `http://localhost:4173` 접속.

## 현재 구현 범위

### 1) 게임 코어 루프
- 총 8라운드
- 라운드당 전투 90초
- 라운드 종료 후 상점 페이즈 15초
- 점수 3점 선취 시 즉시 종료
- 8라운드 종료 시 점수 우위 승리

### 2) 보스/강타/점수
- 라운드별 `RoundData`(강타 수치, 보스 공격력) 적용
- 누적형 `BossHPTable` 적용
- 강타 서버 판정: `boss.hp <= smiteDamage`일 때만 처치
- 강타 1회/라운드, 사망 시 사용 불가
- 점수: 강타 적중 +1, 막타 +1
- 동점 우선순위: 막타 점수 > 강타 점수 > 서버 도착 순서

### 3) 보스 AI
- 기본 공격 주기 0.4초
- 라운드 4 이상 & HP 50% 이하 시 광란
  - 공격속도 +25%
  - 공격력 +10%
  - 패턴 주기 5초 → 3.5초
- 패턴 확률표:
  - Bind 15%
  - Swipe 20%
  - Projectile 25%
  - AoE 20%
  - Ink 20%

### 4) 플레이어/전투 공식
- 기본 스탯: HP 3000 / ATK 100 / MAGIC 80 / ARMOR 20 / REGEN 25
- 기본 공격속도: 2.0회/초 (공격간격 0.5초)
- 공격속도 공식:
  - 최종공속 = 기본공속 × (1 + 공속%)
  - 최종간격 = 1 / 최종공속
- 방어 공식:
  - 방어율 = armor / (armor + 100)
  - 최종피해 = baseDamage × (1 - 방어율)
  - 최소 피해 1
- 라운드 사망 시 관전, 다음 라운드 복귀

### 5) 아이템/골드
- 슬롯: 일반 4 / 궁극 1 / 신발 1
- 전투 중 구매 불가, 상점 페이즈에서만 구매 가능
- 골드:
  - 보스 피해 비례 분배
  - 보스 처치 기본 보상 1000
  - 궁극템 일부 환급
  - 상한 25,000
- 막타 골드 보너스 없음, 강타 골드 없음

### 6) 캐릭터 모듈 구조
- `CharacterBase` + 파생 캐릭터
- 구현 캐릭터:
  - 상태 전환형
  - 마법봉(스택 라운드 유지)
  - 부메랑(점수 이벤트 성장)
  - 활(공속→평타 피해 변환)
  - 석궁(리듬형 공격/이동 기반 변환)

### 7) 캐릭터 스킬(Q/W/E) 실발동
- 모든 캐릭터에 Q/W/E 스킬 쿨다운과 서버 판정 발동 로직 구현
- 스킬은 전투 페이즈에서만 사용 가능, 쿨다운은 서버 기준으로 감소
- 스킬 피해도 막타 판정에 포함되며 보스 처치 시 점수 룰 동일 적용
- 봇 플레이어도 체력/보스 체력 상황에 따라 Q/W/E를 사용

### 8) 모바일 최적화 / 렌더 최적화
- 버튼 위치 프리셋 제공:
  - 기본 / 엄지 집중 / 왼손잡이 / 컴팩트
- 렌더 품질 모드 제공:
  - AUTO / HIGH / BALANCED / LOW
- AUTO 모드에서 평균 FPS에 따라 내부 렌더 스케일과 이펙트량 자동 조정
- 저사양 모드에서 배경 레이어/이펙트 수를 줄여 발열·프레임 드랍 완화

### 9) 스킬 UI/툴팁/SFX
- 스킬 버튼에 아이콘 라벨 표시
- 스킬 정보 패널(툴팁) 토글 버튼 제공
- 쿨다운/설명/남은 시간 표시 강화
- WebAudio 기반 SFX 트리거 포인트 추가:
  - 스킬 Q/W/E 사용
  - 강타 사용
  - 광란 진입
  - 라운드 시작/상점 전환
  - 보스 처치
  - 승/패 확정

### 10) 게임성 폴리싱
- 타격감 강화:
  - 보스 타격 스파크 VFX
  - 플레이어 피격 링 VFX
  - 스킬/강타 강화 이펙트
  - 화면 흔들림(Screen Shake) 적용
- UI 가독성 개선:
  - HUD 대비 강화
  - 버튼/패널 시인성 및 피드 텍스트 가독성 개선
- 밸런스 미세조정:
  - 캐릭터별 Q/W/E 계수와 쿨다운 일부 조정
  - 특정 폭딜 구간 완화, 지속 딜/운영 가치는 유지

### 11) 사용성 기능
- 시작 화면(Start Screen)
- 일시정지/재개
- 재시작
- 설정 모달:
  - 사운드 ON/OFF
  - 사운드 볼륨 슬라이더
  - 진동 ON/OFF
  - 버튼 프리셋 변경
  - 렌더 모드 변경

## 조작

### 모바일
- 왼쪽 스틱: 이동
- 오른쪽 스틱: 수동 조준
- 공격 버튼: 공격 유지
- 강타 버튼: 라운드당 1회 강타
- 스킬 버튼: Q / W / E
- 스킬 툴팁: `?` 버튼
- 설정: 상단 설정 버튼 또는 시작/일시정지 화면에서 진입
- 일시정지: 상단 `일시정지` 버튼
- 진동: 설정 모달에서 ON/OFF

### PC
- 이동: 방향키
- 공격: Space
- 스킬: Q / W / E
- 강타: F
- 일시정지/재개: ESC
- 게임 시작: ENTER

## 파일 구조

```text
index.html
style.css
src/constants.js
src/characters.js
src/game.js
src/main.js
```

그래픽 리소스는 현재 임시 벡터 렌더링으로 구성되어 있으며, 이후 스프라이트/애니메이션 교체가 쉽도록 구조를 분리해두었습니다.